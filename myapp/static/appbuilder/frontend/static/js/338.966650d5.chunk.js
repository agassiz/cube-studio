"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[338],{83100:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(76998),l=n(34330),s=n(66338),c=n(77678),r=n(23446);const i={height:300};function o(e){const[t,n]=(0,a.useState)(),o=Math.random().toString(36).substring(2),{t:d,i18n:u}=(0,c.Bd)(),m={};return(0,a.useEffect)((()=>{const a=document.getElementById(o);if(a){const s=l.Ts(a);s.setOption({...m,...e.option}),t||n(s)}}),[e.option,e.data]),(0,r.jsx)(s.A,{spinning:e.loading,children:(0,r.jsxs)("div",{className:"chart-container",children:[(0,r.jsx)("div",{id:o,style:{...i,...e.style}}),e.isNoData?(0,r.jsx)("div",{className:"chart-nodata",children:(0,r.jsx)("div",{children:d("\u6682\u65e0\u6570\u636e")})}):null]})})}},68062:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(62863),l=n(8315),s=n(76998),c=n(23446);function r(e){const t=Math.random().toString(36).substring(2);let n;const[r,i]=(0,s.useState)(e.options||[]),[o,d]=(0,s.useState)(e.value||"");(0,s.useEffect)((()=>{const t=e.isOpenSearchMatch?(e.options||[]).filter((e=>-1!==e.indexOf(o))):e.options||[];i(t)}),[e.options]),(0,s.useEffect)((()=>{d(e.value||"")}),[e.value]);const u=t=>{d(t),e.onChange&&e.onChange(t)},m=e=>{const t=o,n=e.indexOf(o);if(-1===n)return(0,c.jsx)("span",{children:e});const a=e.substring(0,n),l=e.substring(n+o.length);return(0,c.jsxs)("span",{children:[a,(0,c.jsx)("span",{className:"highlight",children:t}),l]})},p=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];clearTimeout(t),t=setTimeout((()=>{e&&e.apply(null,[...l])}),n)}}(e.onScrollButtom);return(0,c.jsxs)("div",{className:"select-down-modern",children:[e.labelName?(0,c.jsx)("label",{htmlFor:t,className:"pb4 mb0 fs12 d-b",children:e.labelName}):null,(0,c.jsxs)("div",{className:"p-r d-f ac",style:{width:e.width||"100%"},children:[(0,c.jsx)(l.A,{style:{width:"100%"},disabled:e.disabled,id:t,placeholder:e.placeholder||"",maxLength:e.maxLength||200,onChange:e=>u(e.target.value),onKeyPress:t=>{13===t.nativeEvent.keyCode&&(n.blur&&n.blur(),e.onSearch&&e.onSearch(t.currentTarget.value))},value:o,ref:e=>n=e}),(0,c.jsx)(a.A,{className:"p-a r0 mr8"})]}),r.length?(0,c.jsxs)("ul",{className:"select-option shadow",onScroll:t=>{t.stopPropagation();const{currentTarget:n}=t,{scrollTop:a,clientHeight:l,scrollHeight:s}=n;s-l-a<20&&e.onScrollButtom&&p()},style:{maxHeight:"".concat(e.maxHeight,"px")},children:[e.loading?(0,c.jsx)("div",{className:"p-s z9 ta-r",style:{right:"".concat(0,"px"),top:"".concat(0,"px")},children:(0,c.jsx)("div",{className:"d-il p-a",style:{right:"".concat(8,"px"),top:"".concat(0,"px")}})}):null,r.map(((t,n)=>(0,c.jsx)("li",{className:"ellip1",onMouseDown:()=>(t=>{u(t),e.onClick&&e.onClick(t)})(t),children:m(t)},n)))]}):null]})}},64515:(e,t,n)=>{n.d(t,{A:()=>_});var a=n(76998),l=n(7518),s=n(80281),c=n(4283),r=n(95381),i=n(65506),o=n(60498),d=n(93858),u=n(9788),m=n(38697),p=n(70011);const h=n.p+"static/media/emptyBg.15fdf5f39309784ac66e.png";var f=n(91838),x=n(77678),g=n(23446);const j=n(65309),y=e=>{let{onResize:t,width:n,...a}=e;return n?(0,g.jsx)(f.Resizable,{width:n,height:0,handle:(0,g.jsx)("span",{className:"react-resizable-handle",onClick:e=>{e.stopPropagation()}}),onResize:t,draggableOpts:{enableUserSelectHack:!1},children:(0,g.jsx)("th",{...a,style:{...null===a||void 0===a?void 0:a.style,userSelect:"none"}})}):(0,g.jsx)("th",{...a})},_=e=>{const[t,n]=(0,a.useState)(!1),[f,_]=(0,a.useState)({header:[],data:[]}),[v,b]=(0,a.useState)([]),[A,S]=(0,a.useState)(e.columns),w=t=>(n,a)=>{let{size:l}=a;if(l.width<100)return;const s=[...A];s[t]={...s[t],width:l.width};const c=s.reduce(((e,t)=>e+t.width||100),0)+200;localStorage.setItem(e.tableKey||"",JSON.stringify(s)),N({...C,x:c}),S(s)},k=A.map(((e,t)=>({...e,width:e.width||200,onHeaderCell:e=>({width:e.width,onResize:w(t)})}))),[C,N]=(0,a.useState)(e.scroll),{t:O,i18n:I}=(0,x.Bd)();(0,a.useEffect)((()=>{S(e.columns)}),[e.columns]),(0,a.useEffect)((()=>{N(e.scroll)}),[e.scroll]),(0,a.useEffect)((()=>{if(e.dataSource){const t=e.columns.filter((e=>~v.indexOf(e.dataIndex)));E(t,e.dataSource)}}),[e.dataSource,e.columns]);const E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const n=e.map((e=>e.dataIndex)).filter((e=>"handle"!==e)),a=e.map((e=>e.title)).filter((e=>e!==O("\u64cd\u4f5c"))),l=[];t.forEach((e=>{const t={};n.map((n=>{const a=e[n];t[n]=a||""})),l.push(t)})),_({header:a,data:l})},F=()=>{const e=f.header,t=f.data;let n="";return e.length&&t.length?(n="|"+e.join("|")+"|\n",t.forEach((e=>{const t=Object.values(e).map((e=>""===e?" ":e));n=n+"|"+t.join("|")+"|\n"}))):n="",n},T=()=>{const e=f.header,t=f.data;let n="";return e.length&&t.length?(n=e.join("\t")+"\n",t.forEach((e=>{const t=Object.values(e).map((e=>""===e?" ":e));n=n+t.join("\t")+"\n"}))):n="",n};return(0,g.jsxs)(s.A,{className:"tablebox",direction:"vertical",size:"middle",children:[(0,g.jsxs)(c.A,{width:1e3,maskClosable:!1,centered:!0,bodyStyle:{maxHeight:500,overflow:"auto"},visible:t,title:O("\u5bfc\u51fa\u6570\u636e"),onCancel:()=>{n(!1)},footer:null,children:[(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsxs)("div",{className:"mb16",children:[(0,g.jsxs)("span",{className:"pr8",children:[O("\u9009\u62e9\u9700\u8981\u5bfc\u51fa\u7684\u5217"),"\uff1a"]}),(0,g.jsx)(r.A.Group,{options:e.columns.map((e=>({label:e.title,value:e.dataIndex}))).filter((e=>"handle"!==e.value)),defaultValue:[],value:v,onChange:t=>{b(t);const n=e.columns.filter((e=>~t.indexOf(e.dataIndex)));E(n,e.dataSource)}})]}),(0,g.jsxs)("div",{style:{position:"absolute",right:0,bottom:0},children:[(0,g.jsx)(i.A,{size:"small",type:"link",onClick:()=>{b(e.columns.map((e=>e.dataIndex)).filter((e=>"handle"!==e))),E(e.columns,e.dataSource)},children:O("\u5168\u9009")}),(0,g.jsx)(i.A,{size:"small",type:"link",onClick:()=>{b([]),E([],e.dataSource)},children:O("\u53cd\u9009")})]})]}),(0,g.jsxs)(o.A,{children:[(0,g.jsx)(o.A.TabPane,{tab:"Wiki\u683c\u5f0f",children:(0,g.jsx)(j,{text:F(),onCopy:()=>d.Ay.success(O("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")),children:(0,g.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,g.jsx)("code",{children:F()})})})},"jira"),(0,g.jsx)(o.A.TabPane,{tab:"Text\u683c\u5f0f",children:(0,g.jsx)(j,{text:T(),onCopy:()=>d.Ay.success(O("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")),children:(0,g.jsx)("pre",{style:{cursor:"pointer",minHeight:100},children:(0,g.jsx)("code",{children:T()})})})},"test")]})]}),e.titleNode||e.buttonNode||!e.cancelExportData?(0,g.jsxs)(l.A,{justify:"space-between",align:"middle",children:[(0,g.jsx)(u.A,{children:(0,g.jsx)(s.A,{align:"center",children:e.titleNode})}),(0,g.jsx)(u.A,{children:(0,g.jsxs)(s.A,{align:"center",children:[e.buttonNode,e.cancelExportData?null:(0,g.jsx)(i.A,{style:{marginLeft:6},onClick:()=>n(!0),children:O("\u5bfc\u51fa\u6570\u636e")})]})})]}):null,(0,g.jsx)(m.Ay,{renderEmpty:()=>(0,g.jsxs)(l.A,{justify:"center",align:"middle",style:{height:360,flexDirection:"column"},children:[(0,g.jsx)("img",{src:h,style:{width:266},alt:""}),(0,g.jsx)("div",{children:O("\u6682\u65e0\u6570\u636e")})]}),children:(0,g.jsx)(p.A,{size:e.size||"middle",rowKey:e.rowKey?e.rowKey:"id",dataSource:e.dataSource,components:{header:{cell:y}},columns:k,pagination:!1!==e.pagination&&{...e.pagination},scroll:C,loading:e.loading,onChange:e.onChange,rowSelection:e.rowSelection})})]})}},51556:(e,t,n)=>{n.r(t),n.d(t,{default:()=>re});var a=n(76998),l=n(97789),s=n(80281),c=n(18757),r=n(11848),i=n(4283),o=n(93858),d=n(61730),u=n(66338),m=n(7518),p=n(9788),h=n(65506),f=n(4520),x=n(25077),g=n(98584),j=n(60249),y=n(30080),_=n(23446);const{Title:v}=y.A,b=e=>{const t={position:"sticky",top:0};return(0,_.jsxs)(m.A,{className:"title-header",justify:"space-between",align:"middle",style:e.noBorderBottom?{borderBottom:"none",...t}:t,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(v,{className:"d-il mr12",level:5,style:{marginBottom:10},children:e.title}),(0,_.jsx)("div",{className:"d-il",children:e.breadcrumbs})]}),(0,_.jsx)(p.A,{children:(0,_.jsx)(s.A,{children:e.children?e.children:null})})]})};var A=n(64515),S=n(25443),w=n.n(S),k=n(22424),C=n(51749),N=n(87514),O=n(71155),I=n(5336),E=n(1009),F=n(15482),T=n(81365),M=n(41029),L=n(50790),R=n(77678);const P=e=>{const{t:t,i18n:n}=(0,R.Bd)(),[l]=L.A.useForm(),[,s]=(0,a.useState)();a.useCallback((()=>s({})),[]);(0,a.useEffect)((()=>{e.formData&&l.setFieldsValue(e.formData)}),[e]);const[c,r]=(0,a.useState)({currentChange:{},allValues:{}});return(0,_.jsx)(i.A,{destroyOnClose:!0,maskClosable:!1,width:e.width||680,visible:e.visible,title:e.title,okText:t("\u786e\u5b9a"),cancelText:t("\u53d6\u6d88"),onCancel:()=>{l.resetFields(),e.onCancel()},onOk:()=>{console.log(l.getFieldsValue()),l.validateFields().then((t=>{e.onCreate(t,l)})).catch((e=>{}))},children:(0,_.jsx)(u.A,{spinning:e.loading,children:(0,_.jsx)(L.A,{onValuesChange:(e,t)=>{r({currentChange:e,allValues:t})},labelCol:{span:5},wrapperCol:{span:19},form:l,layout:"horizontal",name:"form_in_modal",children:e.children&&"[object Function]"===Object.prototype.toString.call(e.children)?e.children(l,c):e.children})})})};var D=n(63871),V=n(18e3),z=n(8315),H=n(97041),B=n(7632);const{Option:U}=V.A,K=e=>{const[t]=L.A.useForm(),[n,l]=(0,a.useState)(!1),[s,c]=(0,a.useState)([]),r=e=>(e||[]).map(((e,t)=>({...e,indexKey:t}))),[i,o]=(0,a.useState)(r(e.params)),[d,u]=(0,a.useState)(r(e.params)),[f,x]=(0,a.useState)(new Map),{t:g,i18n:j}=(0,R.Bd)();(0,a.useEffect)((()=>{if(e.values){const n=e.values.length?e.values:[{key:void 0,value:void 0}];t.setFieldsValue({group:n});const a=[...d];for(let e=0;e<a.length;e++)for(let t=0;t<n.length;t++){void 0!==n[t]&&n[t].key===a[e].name&&(a[e].used=!0)}u(a)}}),[e.values]),(0,a.useEffect)((()=>{if(e.params&&e.params.length){const t=r(e.params);o(t);const n=f;for(let e=0;e<t.length;e++){const a=t[e];n.set(a.name,a)}x(n)}}),[e.params]);const y=e=>{let n=t.getFieldValue(["group",e,"key"]);if(!n)return(0,_.jsx)(z.A,{style:{width:"65%"},onPressEnter:()=>v()});{const e=f.get(n);if("input"===(null===e||void 0===e?void 0:e.type))return(0,_.jsx)(z.A,{style:{width:"65%"},defaultValue:e.defalutValue,placeholder:e.placeHolder,onPressEnter:()=>v()});if("select"===(null===e||void 0===e?void 0:e.type)){const t=(null===e||void 0===e?void 0:e.option)||[];return(0,_.jsx)(V.A,{style:{width:"65%"},dropdownMatchSelectWidth:500,showSearch:!0,mode:"label"===n?"multiple":void 0,optionFilterProp:"label",options:t.map((e=>({label:e.label,value:e.value})))})}}},v=()=>{t.validateFields()};return(0,_.jsxs)(L.A,{className:"cmdb-mixsearch bg-title",form:t,onFinish:async t=>{console.log(t);const n=t.group.filter((e=>!!e.key)).map((e=>({key:e.key,value:e.value})));e.onChange(n)},initialValues:{group:[{key:void 0,value:void 0}]},children:[(0,_.jsxs)(m.A,{className:"cmdb-mixsearch-content",gutter:16,style:{marginLeft:0,marginRight:0,...n?{height:70}:{height:"auto"}},children:[(0,_.jsx)(L.A.List,{name:"group",children:(e,n)=>{let{add:a,remove:l}=n;return(0,_.jsxs)(_.Fragment,{children:[e.map(((e,n)=>(0,_.jsx)(p.A,{span:8,children:(0,_.jsxs)(m.A,{align:"middle",gutter:8,children:[(0,_.jsx)(p.A,{className:"cmdb-mixsearch-group",children:(0,_.jsxs)(z.A.Group,{compact:!0,children:[(0,_.jsx)(L.A.Item,{noStyle:!0,name:[e.name,"key"],rules:[{required:!1,message:g("\u8bf7\u9009\u62e9key")}],children:(0,_.jsx)(V.A,{style:{width:"35%"},placeholder:g("\u8bf7\u9009\u62e9"),onChange:e=>{(e=>{const n=[...d],a=(t.getFieldValue("group")||[]).filter((e=>!!e)).map((e=>e.key));for(let t=0;t<n.length;t++){const l=n[t];l.name===e?n[t].used=!0:a.includes(l.name)||(n[t].used=!1)}u(n)})(e)},children:d.map(((e,t)=>(0,_.jsx)(U,{style:{display:e.used?"none":"inherit"},value:e.name,children:e.title||e.name},"mixSearch_".concat(e.name,"_").concat(t))))})}),(0,_.jsx)(L.A.Item,{noStyle:!0,shouldUpdate:!0,name:[e.name,"value"],rules:[{required:!1,message:g("\u8bf7\u586b\u5199value")}],children:y(n)})]})}),(0,_.jsx)(p.A,{className:"cmdb-mixsearch-delete",onClick:()=>{const e=(t.getFieldValue("group")||[]).map((e=>e?e.key:void 0)),a=[...d];if(e[n])for(let t=0;t<a.length;t++){a[t].name===e[n]&&(a[t].used=!1)}u(a),l(n)},children:(0,_.jsx)(H.A,{})})]})},"mixSearch_".concat(e.key,"_").concat(n)))),i.length!==e.length&&(0,_.jsx)(p.A,{className:"cmdb-mixsearch-add d-il",onClick:()=>{a()},children:(0,_.jsx)(I.A,{})})]})}}),(0,_.jsx)(p.A,{flex:1,children:(0,_.jsx)(m.A,{justify:"end",children:(0,_.jsx)(h.A,{type:"primary",htmlType:"submit",children:g("\u67e5\u8be2")})})})]}),(0,_.jsx)(m.A,{className:"cmdb-mixsearch-collapsed",children:(0,_.jsx)(m.A,{onClick:()=>{l(!n)},justify:"center",align:"middle",children:n?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.A,{children:g("\u5c55\u5f00")}),(0,_.jsx)(p.A,{children:(0,_.jsx)(C.A,{})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.A,{children:g("\u6536\u8d77")}),(0,_.jsx)(p.A,{children:(0,_.jsx)(B.A,{})})]})})})]})};var q=n(63756),J=n(34973),W=n(71087),G=n(63381),Q=n(69048),X=n(94080),Z=n(68062),Y=(n(96870),n(85148)),$=n(75863),ee=n(8794),te=n(69592),ne=n(94039);function ae(e){const[t,n]=(0,a.useState)(!1),[l,s]=(0,a.useState)(!1),[c,r]=(0,a.useState)(""),[i,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)([]);const f=(t,n,a)=>{const l=function(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}(t),s=Math.random().toString(36).substring(2);return"video"===a?(0,_.jsxs)("div",{className:"p-r",children:[(0,_.jsx)("span",{onClick:()=>{const t=[...p];t.splice(n,1),h(t),e.onChange&&e.onChange(t)},className:"d-il p-a plr8 ptb2 bg-fail",style:{top:0,right:0,borderBottomLeftRadius:6,zIndex:9},children:(0,_.jsx)(H.A,{style:{color:"#fff"}})}),(0,_.jsx)("video",{className:"w100 mb8",src:l,controls:!0})]},s):"audio"===a?(0,_.jsxs)("div",{className:"d-f ac mb8",children:[(0,_.jsx)("audio",{className:"w100 flex1",src:l,controls:!0}),(0,_.jsx)("span",{onClick:()=>{const t=[...p];t.splice(n,1),h(t),e.onChange&&e.onChange(t)},className:"d-il plr8 ptb2 bg-fail",style:{borderRadius:6},children:(0,_.jsx)(H.A,{style:{color:"#fff"}})})]},s):t};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{children:p.map(((t,n)=>f(t,n,e.type||"file")))}),(0,_.jsxs)(ne.A.Dragger,{fileList:p,showUploadList:!1,customRequest:t=>{console.log(t.file);const n=[...p,t.file];h(n),Promise.all(n.map((e=>{return t=e,console.log("file2Bin",t),new Promise(((e,n)=>{if(t){t.name.replace(/.+\./,""),t.name;let n=new FileReader;n.readAsDataURL(t),n.onload=()=>{e(n.result)}}else n(void 0)}));var t}))).then((t=>{console.log(t),e.onChange&&e.onChange(t)}))},beforeUpload:function(t){var n;console.log("file",t);const a=e.maxCount||1;if(p.length>=a)return o.Ay.error("\u8d85\u51fa\u6587\u4ef6\u6570\u91cf\u9650\u5236"),!1;const l=null===(n=e.format)||void 0===n?void 0:n.includes(t.type);l||o.Ay.error("\u6587\u4ef6\u683c\u5f0f\u9519\u8bef");const s=t.size<(e.maxSize||2097152);return s||o.Ay.error("\u6587\u4ef6\u5927\u5c0f\u9650\u5236"),l&&s},onChange:t=>{if(console.log(t),"uploading"!==t.file.status)return"done"===t.file.status&&(s(!1),h(t.fileList),e.onChange&&e.onChange(t.fileList)),"removed"===t.file.status?(h(t.fileList),void(e.onChange&&e.onChange(t.fileList))):void 0;s(!0)},children:[(0,_.jsxs)("p",{className:"ant-upload-drag-icon",children:["file"!==e.type&&e.type?null:(0,_.jsx)($.A,{}),"video"===e.type?(0,_.jsx)(ee.A,{}):null,"audio"===e.type?(0,_.jsx)(te.A,{}):null]}),(0,_.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u6587\u4ef6\u4e0a\u4f20"})]})]})}function le(e){return e.reduce(((e,t)=>e+(t||"").split("").reduce(((e,t)=>e+t.charCodeAt(0)),0)),0)}function se(e){const{t:t,i18n:n}=(0,R.Bd)(),[s,c]=(0,a.useState)(0),[r,i]=(0,a.useState)(e.config),o=(0,a.useRef)(e.config),d=e=>{o.current=e,i(e)},[u,m]=(0,a.useState)(e.configGroup),p=(0,a.useRef)(e.configGroup),f=e=>{p.current=e,m(e)},x=(t,n)=>{const a=((t,n)=>n.filter((e=>e.dep.includes(t))).map((t=>{const n=le(t.dep.map((t=>{var n;return null===(n=e.form)||void 0===n?void 0:n.getFieldValue(t)})).filter((e=>!(void 0===e||null===e))));return{effect:t.effect,option:t.effectOption[n]||[]}})))(t,n);a.forEach((t=>{var n;null===(n=e.form)||void 0===n||n.setFieldsValue({[t.effect]:void 0}),((e,t)=>{const n=o.current?[...o.current]:[];if(n)for(let a=0;a<n.length;a++){const l=n[a];l.name===e&&(n[a]={...l,...t})}d(n)})(t.effect,{options:t.option}),((e,t)=>{const n=p.current?[...p.current]:[];for(let a=0;a<n.length;a++){const l=[...n[a].config];for(let n=0;n<l.length;n++){const a=l[n];a.name===e&&(l[n]={...a,...t})}n[a]={...n[a],config:l}}f(n)})(t.effect,{options:t.option})}))};(0,a.useEffect)((()=>{if(e.formChangeRes&&e.linkageConfig){const{currentChange:t}=e.formChangeRes;x(Object.keys(t)[0],e.linkageConfig)}}),[e.formChangeRes]),(0,a.useEffect)((()=>{var t;d(e.config),f(e.configGroup);const n=(null===(t=e.form)||void 0===t?void 0:t.getFieldsValue())||{};Object.entries(n).forEach((t=>{let[n,a]=t;void 0!==a&&x(n,e.linkageConfig||[])}))}),[e.configGroup,e.config]);const g=()=>{c(s+1)},j=(e,n)=>(0,_.jsx)(L.A.Item,{label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:(0,_.jsxs)(_.Fragment,{children:[e.data.tips?(0,_.jsx)(l.A,{className:"mr8",placement:"bottom",title:(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:e.data.tips}}),children:(0,_.jsxs)("div",{className:"cp d-il",children:[(0,_.jsx)(O.A,{style:{color:"#1672fa"}}),(0,_.jsx)("span",{className:"pl4 c-theme",children:t("\u8be6\u60c5")})]})}):null,e.description?(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null]}),...n,children:(0,_.jsx)(z.A,{disabled:e.disable,placeholder:e.placeHolder||"".concat(t("\u8bf7\u9009\u62e9")).concat(e.label)})},"dynamicForm_".concat(e.name)),y=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case"input":case"match-input":return j(n,a);case"input-select":return((n,a)=>{const s=(n.options||[]).map((e=>e.label));return(0,_.jsx)(L.A.Item,{label:n.label,name:n.name,rules:n.rules,initialValue:n.defaultValue,extra:(0,_.jsxs)(_.Fragment,{children:[n.data.tips?(0,_.jsx)(l.A,{className:"mr8",placement:"bottom",title:(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:n.data.tips}}),children:(0,_.jsxs)("div",{className:"cp d-il",children:[(0,_.jsx)(O.A,{style:{color:"#1672fa"}}),(0,_.jsx)("span",{className:"pl4 c-theme",children:t("\u8be6\u60c5")})]})}):null,n.description?(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:n.description}}):null]}),...a,children:(0,_.jsx)(Z.A,{onClick:t=>{n.data.retry_info&&e.onRetryInfoChange&&e.onRetryInfoChange(t)},isOpenSearchMatch:!0,disabled:n.disable,placeholder:"".concat(t("\u8bf7\u9009\u62e9")).concat(n.label),options:s})},"dynamicForm_".concat(n.name))})(n,a);case"textArea":return((e,n)=>(0,_.jsx)(L.A.Item,{label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:(0,_.jsxs)(_.Fragment,{children:[e.data.tips?(0,_.jsx)(l.A,{className:"mr8",placement:"bottom",title:(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:e.data.tips}}),children:(0,_.jsxs)("div",{className:"cp d-il",children:[(0,_.jsx)(O.A,{style:{color:"#1672fa"}}),(0,_.jsx)("span",{className:"pl4 c-theme",children:t("\u8be6\u60c5")})]})}):null,e.description?(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null]}),...n,children:(0,_.jsx)(z.A.TextArea,{autoSize:{minRows:4},disabled:e.disable,placeholder:e.placeHolder||"".concat(t("\u8bf7\u9009\u62e9")).concat(e.label)})},"dynamicForm_".concat(e.name)))(n,a);case"select":return((n,a)=>{const s=n.options||[];return(0,_.jsx)(L.A.Item,{label:n.label,name:n.name,rules:n.rules,initialValue:n.defaultValue,extra:(0,_.jsxs)(_.Fragment,{children:[n.data.tips?(0,_.jsx)(l.A,{className:"mr8",placement:"bottom",title:(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:n.data.tips}}),children:(0,_.jsxs)("div",{className:"cp d-il",children:[(0,_.jsx)(O.A,{style:{color:"#1672fa"}}),(0,_.jsx)("span",{className:"pl4 c-theme",children:t("\u8be6\u60c5")})]})}):null,n.description?(0,_.jsx)("span",{className:"pr4",dangerouslySetInnerHTML:{__html:n.description}}):null,n.data.isRefresh?(0,_.jsxs)("div",{className:"cp d-il",onClick:()=>{e.onRetryInfoChange&&e.onRetryInfoChange()},children:[(0,_.jsx)(Q.A,{style:{color:"#1672fa"}}),(0,_.jsx)("span",{className:"pl4 c-theme",children:t("\u5237\u65b0\u5217\u8868")})]}):null]}),...a,children:(0,_.jsx)(G.A,{style:{width:"100%"},mode:n.multiple?"multiple":void 0,onChange:t=>{n.data.retry_info&&e.onRetryInfoChange&&e.onRetryInfoChange(t)},showSearch:!0,disabled:n.disable,optionFilterProp:"label",placeholder:n.placeHolder||"".concat(t("\u8bf7\u9009\u62e9")).concat(n.label),options:s})},"dynamicForm_".concat(n.name))})(n,a);case"datePicker":return((e,n)=>(0,_.jsx)(L.A.Item,{label:e.label,name:e.name,rules:[{required:!0,message:t("\u8bf7\u9009\u62e9\u65f6\u95f4")}],...n,children:(0,_.jsx)(J.A,{style:{width:"100%"},locale:Y.A,showTime:!!e.data.showTime,disabledDate:e=>e&&e>w()().endOf("day")})},"dynamicForm_".concat(e.name)))(n,a);case"rangePicker":return((e,n)=>(0,_.jsx)(L.A.Item,{label:e.label,name:e.name,rules:[{required:!0,message:t("\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4")}],...n,children:(0,_.jsx)(J.A,{style:{width:"100%"},locale:Y.A,showTime:!!e.data.showTime,disabledDate:e=>e&&e>w()().endOf("day")})},"dynamicForm_".concat(e.name)))(n,a);case"radio":return((e,t)=>{const n=e.options||[];return(0,_.jsx)(L.A.Item,{label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,...t,children:(0,_.jsx)(q.Ay.Group,{options:n})},"dynamicForm_".concat(e.name))})(n,a);case"fileUpload":return((e,t)=>(0,_.jsx)(L.A.Item,{label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,_.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null,...t,children:(0,_.jsx)(ae,{})},"dynamicForm_".concat(e.name)))(n,a);default:return null}},v=e=>(e||[]).map((e=>{if(e.list&&e.list.length){return(0,_.jsx)(L.A.List,{name:e.name,children:(n,a)=>{let{add:l,remove:s}=a;return(0,_.jsxs)(_.Fragment,{children:[n.map((n=>{let{key:a,name:l,...c}=n;return(0,_.jsxs)("div",{className:"bor b-side pt8 plr16 mb8 d-f",style:{alignItems:"start",minWidth:1600},children:[e.list&&e.list.map((e=>y(e,{...c,name:[l,e.name],labelAlign:"left",labelCol:24,style:{flexDirection:"column",flex:1,marginBottom:8}}))),(0,_.jsx)(L.A.Item,{children:(0,_.jsx)(h.A,{danger:!0,onClick:()=>s(l),block:!0,icon:(0,_.jsx)(X.A,{}),style:{width:120},children:t("\u5220\u9664\u8be5\u9879")})})]},a)})),(0,_.jsx)(L.A.Item,{noStyle:!0,className:"w100",label:"",children:(0,_.jsx)(h.A,{type:"dashed",className:"w100",onClick:()=>l(),block:!0,icon:(0,_.jsx)(I.A,{}),children:t("\u589e\u52a0\u4e00\u9879")})})]})}},"dynamicForm_".concat(e.name))}return(0,_.jsx)("div",{style:{width:680},children:y(e)})}));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(L.A.Item,{name:e.primaryKey||"id",noStyle:!0,hidden:!0,children:(0,_.jsx)(z.A,{})},"dynamicForm_id"),u&&u.length?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(W.A,{current:s,children:(u||[]).map(((e,t)=>(0,_.jsx)(W.A.Step,{title:e.group},t)))}),(0,_.jsx)("div",{className:"pt32",children:(u||[]).map(((e,t)=>(0,_.jsx)("div",{className:[s===t?"p-r z9":"p-a z-99 v-h l-10000"].join(" "),children:v(e.config)},t)))}),(0,_.jsxs)("div",{className:"ta-c pt32",children:[s>0&&(0,_.jsx)(h.A,{onClick:()=>{c(s-1)},children:t("\u4e0a\u4e00\u6b65")}),s<(u||[]).length-1&&(0,_.jsx)(h.A,{type:"primary",className:"ml16",onClick:()=>{if(e.form){const t=u[s].config.map((e=>e.name));e.form.validateFields(t).then((()=>{g()})).catch((e=>{console.log(e)}))}else g()},children:t("\u4e0b\u4e00\u6b65")}),(0,_.jsx)("div",{children:s===(u||[]).length-1&&(0,_.jsx)("div",{className:"pt8 c-hint-b",children:t("\u70b9\u51fb\u786e\u5b9a\u5b8c\u6210\u63d0\u4ea4")})})]})]}):(0,_.jsx)("div",{style:{width:680},children:v(r||[])})]})}var ce=n(4743);function re(e){const t=(0,T.Zp)(),n=(0,T.zy)(),[y,v]=(0,a.useState)([]),[S,L]=(0,a.useState)(!0),[V,z]=(0,a.useState)(!1),[H,B]=(0,a.useState)("true"===(0,M.sF)("isVisableAdd")||!1),[U,q]=(0,a.useState)(!1),[J,W]=(0,a.useState)(!1),[G,Q]=(0,a.useState)(!1),[X,Z]=(0,a.useState)(!1),[Y,$]=(0,a.useState)([]),ee={current:1,pageSize:20,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:[20,50,100,500],showTotal:e=>"".concat(At("\u5171")).concat(e).concat(At("\u6761"))},[te,ne]=(0,a.useState)(ee),[ae,re]=(0,a.useState)([]),[ie,oe]=(0,a.useState)([]),[de,ue]=(0,a.useState)([]),me=(0,a.useRef)(de),pe=e=>{me.current=e,ue(e)},[he,fe]=(0,a.useState)([]),[xe,ge]=(0,a.useState)([]),[je,ye]=(0,a.useState)([]),[_e,ve]=(0,a.useState)([]);let be={};try{be=JSON.parse((0,M.sF)("formData")||"{}")}catch(Tt){}const[Ae,Se]=(0,a.useState)(be),[we,ke]=(0,a.useState)({}),[Ce,Ne]=(0,a.useState)({}),Oe=(0,a.useRef)(Ce),[Ie,Ee]=(0,a.useState)([]),[Fe,Te]=(0,a.useState)(1e3),[Me,Le]=(0,a.useState)([]),[Re,Pe]=(0,a.useState)({}),[De,Ve]=(0,a.useState)(),[ze,He]=(0,a.useState)(),Be=(0,a.useRef)(ze),[Ue,Ke]=(0,a.useState)(!1),[qe,Je]=(0,a.useState)(!1),[We,Ge]=(0,a.useState)([]),[Qe,Xe]=(0,a.useState)([]),[Ze,Ye]=(0,a.useState)(),[$e,et]=(0,a.useState)(""),[tt,nt]=(0,a.useState)(""),[at,lt]=(0,a.useState)(),[st,ct]=(0,a.useState)(),[rt,it]=(0,a.useState)([]),[ot,dt]=(0,a.useState)([]),[ut,mt]=(0,a.useState)(!0),pt=(0,a.useRef)(ut),[ht,ft]=(0,a.useState)(!1),xt=(0,a.useRef)(ht),[gt,jt]=(0,a.useState)(!1),[yt,_t]=(0,a.useState)(20),[vt,bt]=(0,a.useState)(),{t:At,i18n:St}=(0,R.Bd)(),[wt,kt]=(0,a.useState)(""),Ct={pageConf:ee,params:[],paramsMap:Re,sorter:void 0};(0,a.useEffect)((()=>{}),[yt]),(0,a.useEffect)((()=>{kt((0,M.QD)())}),[]),(0,a.useEffect)((()=>{e&&e.disable&&t("/404")}),[]);const Nt=(e,t,n)=>e.map(((e,a)=>{let l=e["ui-type"]||"input";"select2"===l&&(l="select"),"file"===l&&(l="fileUpload");const s=e.label||t[e.name],c=(e.validators||[]).map((e=>{if("select"===l)return"DataRequired"===e.type?{required:!0,message:"".concat(At("\u8bf7\u9009\u62e9")," ").concat(s)}:void 0;switch(e.type){case"DataRequired":return{required:!0,message:"".concat(At("\u8bf7\u8f93\u5165")," ").concat(s)};case"Regexp":return{pattern:new RegExp("".concat(e.regex)),message:"".concat(At("\u8bf7\u6309\u6b63\u786e\u7684\u89c4\u5219\u8f93\u5165"))};case"Length":return{min:e.min||0,max:e.max,message:"".concat(At("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u957f\u5ea6"))};default:return}})).filter((e=>!!e)),r=Nt(e.info||[],t,n);return{label:s,type:l,rules:c,list:r,name:e.name,disable:e.disable,description:e.description||n[e.name]||void 0,required:e.required,defaultValue:""===e.default?void 0:e.default,multiple:e["ui-type"]&&"select2"===e["ui-type"],options:(e.values||[]).map((e=>({label:e.value,value:e.id}))),data:{...e}}}));(0,a.useEffect)((()=>{const a=(0,M.sF)("targetId"),d=a?"/dimension_remote_table_modelview/".concat(a,"/api/"):null===e||void 0===e?void 0:e.url;z(!0),(0,D.wr)(d).then((a=>{const{list_columns:d,label_columns:u,filters:m,add_columns:p,edit_columns:h,permissions:f,description_columns:x,add_fieldsets:g,edit_fieldsets:j,help_url:y,order_columns:v,action:b,route_base:A,column_related:S,primary_key:w,label_title:N,cols_width:O,import_data:I,download_data:E,list_ui_type:F,list_ui_args:T,ops_link:L,enable_favorite:R,echart:P,page_size:V,list_title:H}=a.data,B=(null===e||void 0===e?void 0:e.related)||f.includes("can_show")||f.includes("can_edit")||f.includes("can_delete"),U=localStorage.getItem("tablebox_".concat(n.pathname)),K=JSON.parse(U||"[]").reduce(((e,t)=>({...e,[t.dataIndex]:t.width})),{}),q=Object.entries(S||{}).reduce(((e,t)=>{let[n,a]=t;return[...e,{dep:a.src_columns,effect:a.des_columns.join(""),effectOption:a.related.reduce(((e,t)=>({...e,[le(t.src_value)]:t.des_value.map((e=>({label:e,value:e})))})),{})}]}),[]),J=d.map((e=>({title:u[e]||e,dataIndex:e,key:e,sorter:v.includes(e)?(t,n)=>t[e]-n[e]:void 0,render:(t,n)=>{var a;if(void 0===t||""===t)return"-";if(O[e]&&-1!==(null===(a=O[e].type)||void 0===a?void 0:a.indexOf("ellip")))return(0,_.jsx)(l.A,{title:(0,_.jsx)("span",{className:"tips-content",dangerouslySetInnerHTML:{__html:t}}),placement:"topLeft",children:(0,_.jsx)("div",{className:O[e].type,dangerouslySetInnerHTML:{__html:t}})});if("[object Object]"===Object.prototype.toString.call(t)){const e=Object.entries(t).reduce(((e,t)=>{let[n,a]=t;return[...e,{label:n,value:a}]}),[]);return e.length?(0,_.jsx)("div",{style:{overflow:"auto",maxHeight:100},children:e.map(((e,t)=>(0,_.jsxs)("div",{children:[u[e.label]||e.label,":",e.value]},"table_itemvalue_".concat(t))))}):"-"}return(0,_.jsx)("div",{style:{overflow:"auto",maxHeight:100},dangerouslySetInnerHTML:{__html:t}})},width:K[e]||O[e]&&O[e].width||100}))),G=Object.entries(b||{}).reduce(((e,t)=>{let[n,a]=t;return[...e,{...a}]}),[]),Q=G.filter((e=>!!e.multiple)),X=G.filter((e=>!!e.single)),Y={title:At("\u64cd\u4f5c"),width:80,dataIndex:"handle",key:"handle",align:"right",fixed:"right",render:(a,l)=>{var d;return(0,_.jsx)(s.A,{size:"middle",children:B?(0,_.jsx)(c.A,{overlay:(0,_.jsxs)(r.A,{children:[xt.current&&pt.current?(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"link",onClick:()=>{i.A.confirm({title:At("\u6536\u85cf"),icon:(0,_.jsx)(k.A,{}),content:"".concat(At("\u786e\u5b9a\u6536\u85cf"),"?"),okText:At("\u786e\u8ba4\u6536\u85cf"),cancelText:At("\u53d6\u6d88"),onOk:()=>new Promise(((e,t)=>{(0,D.EH)("".concat(A,"favorite/").concat(l[w])).then((t=>{e("")})).catch((e=>{t()}))})).then((e=>{o.Ay.success(At("\u6536\u85cf\u6210\u529f")),It({...Ct,pageConf:te,params:me.current,paramsMap:m})})).catch((()=>{o.Ay.error(At("\u6536\u85cf\u5931\u8d25"))})),onCancel(){}})},children:At("\u6536\u85cf")})}):null,xt.current&&!pt.current?(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"link",onClick:()=>{i.A.confirm({title:At("\u53d6\u6d88\u6536\u85cf"),icon:(0,_.jsx)(k.A,{}),content:"".concat(At("\u786e\u5b9a\u53d6\u6d88\u6536\u85cf"),"?"),okText:At("\u786e\u8ba4\u53d6\u6d88\u6536\u85cf"),cancelText:At("\u53d6\u6d88"),onOk:()=>new Promise(((e,t)=>{(0,D.ip)("".concat(A,"favorite/").concat(l[w])).then((t=>{e("")})).catch((e=>{t()}))})).then((e=>{o.Ay.success(At("\u64cd\u4f5c\u6210\u529f")),It({...Ct,pageConf:te,params:me.current,paramsMap:m})})).catch((()=>{o.Ay.error(At("\u64cd\u4f5c\u5931\u8d25"))})),onCancel(){}})},children:At("\u53d6\u6d88\u6536\u85cf")})}):null,f.includes("can_show")?(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"link",onClick:()=>{Z(!0),Et(l[w])},children:At("\u8be6\u60c5")})}):null,f.includes("can_edit")?(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"link",onClick:()=>{W(!0),(0,D.wr)(A,l[w]).then((e=>{const{edit_columns:t,label_columns:n,description_columns:a}=e.data,s=Nt(t,n,a),c=j.map((e=>{const t=e.fields.map((e=>ae[e])).filter((e=>!!e));return{group:e.group,expanded:e.expanded,config:Nt(t,n,a)}}));ge(s),ve(c),Et(l[w])})).catch((()=>{o.Ay.warn(At("\u7528\u6237\u6ca1\u6709\u4fee\u6539\u6743\u9650"))}))},children:At("\u4fee\u6539")})}):null,f.includes("can_delete")?(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"c-fail cp",onClick:()=>{i.A.confirm({title:At("\u5220\u9664"),icon:(0,_.jsx)(k.A,{}),content:"".concat(At("\u786e\u5b9a\u5220\u9664"),"?"),okText:At("\u786e\u8ba4\u5220\u9664"),cancelText:At("\u53d6\u6d88"),okButtonProps:{danger:!0},onOk:()=>new Promise(((e,t)=>{(0,D.Np)("".concat(A).concat(l[w])).then((t=>{e("")})).catch((e=>{t()}))})).then((e=>{o.Ay.success(At("\u5220\u9664\u6210\u529f")),It({...Ct,pageConf:te,params:me.current,paramsMap:m})})).catch((()=>{o.Ay.error(At("\u5220\u9664\u5931\u8d25"))})),onCancel(){}})},children:At("\u5220\u9664")})}):null,null===e||void 0===e||null===(d=e.related)||void 0===d?void 0:d.map(((e,a)=>(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"link",onClick:()=>{t("".concat(n.pathname,"/").concat(e.name,"?id=").concat(l[w]))},children:e.title})},"moreAction_".concat(a)))),!!X.length&&X.map(((e,t)=>(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("div",{className:"link",onClick:()=>{i.A.confirm({title:e.confirmation,icon:(0,_.jsx)(k.A,{}),content:"",okText:At("\u786e\u8ba4"),cancelText:At("\u53d6\u6d88"),onOk:()=>new Promise(((t,n)=>{(0,D.kF)("".concat(A,"action/").concat(e.name,"/").concat(l[w])).then((e=>{t(e)})).catch((e=>{n(e)}))})).then((e=>{o.Ay.success(At("\u64cd\u4f5c\u6210\u529f")),e.data.result.link&&window.open(e.data.result.link,"bank"),It({...Ct,pageConf:te,params:me.current,paramsMap:m})})).catch((()=>{o.Ay.error(At("\u64cd\u4f5c\u5931\u8d25"))})),onCancel(){}})},children:At("".concat(e.text))})},"table_action_".concat(t))))]}),children:(0,_.jsxs)("div",{className:"link",children:[At("\u66f4\u591a"),(0,_.jsx)(C.A,{})]})}):null})}},$=[...J];B&&$.push(Y);const ne=p.reduce(((e,t)=>({...e,[t.name]:t})),{});if(be&&Object.keys(be).length){const e=(Object.keys(be)||[]).filter((e=>be[e]&&ne[e]&&ne[e].retry_info));let t=e.length;const n=e=>{t-=1,(0,D._F)("".concat(A,"_info"),{exist_add_args:e}).then((e=>{const{add_columns:a,label_columns:l,description_columns:s,add_fieldsets:c}=e.data,r=a.reduce(((e,t)=>({...e,[t.name]:t})),{}),i=Nt(a,l,s),o=c.map((e=>{const t=e.fields.map((e=>r[e])).filter((e=>!!e));return{group:e.group,expanded:e.expanded,config:Nt(t,l,s)}})),d=a.filter((e=>""!==e.default)).map((e=>({[e.name]:e.default}))).reduce(((e,t)=>({...e,...t})),{});if(Se(d),fe(i),ye(o),t){const e=JSON.stringify(d);n(e)}})).catch((e=>{o.Ay.error(At("\u5b57\u6bb5\u5207\u6362\u9519\u8bef"))})).finally((()=>{z(!1)}))};if(e.length){const e=be;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){void 0===e[n]&&delete e[n]}const t=JSON.stringify(e);n(t)}}const ae=h.reduce(((e,t)=>({...e,[t.name]:t})),{});h.forEach((e=>{"list"===e["ui-type"]&&e.info.forEach((e=>{ae[e.name]=e}))}));const se=Nt(p,u,x),ce=g.map((e=>{const t=e.fields.map((e=>ne[e])).filter((e=>!!e));return{group:e.group,expanded:e.expanded,config:Nt(t,u,x)}})),ie=Object.entries(m).reduce(((e,t)=>{let[n,a]=t;return[...e,{name:n,type:a["ui-type"]||"input",title:u[n],oprList:a.filter.map((e=>e.operator)),defalutValue:""===a.default?void 0:a.default,option:a.values?a.values.map((e=>({label:e.value,value:e.id}))):void 0}]}),[]);let de=Object.entries(m).reduce(((e,t)=>{let[n,a]=t;return[...e,{key:n,value:a.default}]}),[]).filter((e=>e.value));const ue=JSON.parse(localStorage.getItem("filter_".concat(n.pathname).concat(n.search))||"[]");let he;if((0,M.sF)("filter"))try{he=JSON.parse((0,M.sF)("filter")||"[]")}catch(Ae){o.Ay.error(At("filter\u89e3\u6790\u5f02\u5e38"))}const xe=he||ue;var je;xe&&xe.length&&(de=xe),bt(H),_t(V),jt(P),je=R,xt.current=je,ft(je),it(L),dt(d),lt(F),ct(T),Je(E),Ke(I),nt(N),et(w),Ge(q),Xe(Q),(e=>{Be.current=e,He(e)})(A),ke(ae),Pe(m),re($),oe(ie),fe(se),ye(ce),(e=>{Oe.current=e,Ne(e)})(u),Le(f);const _e=U?$.reduce(((e,t)=>e+t.width||100),0)+80:100*$.length+80+80;Te(_e),Ve(y),pe(de),It({pageConf:{...ee,pageSize:V},params:de,paramsMap:m,sorter:void 0})})).catch((e=>{console.log(e)})).finally((()=>{L(!1),z(!1)}))}),[]);const Ot=(t,n)=>{let a;const l=(0,M.sF)("id");return a={filters:[l?{col:null===e||void 0===e?void 0:e.model_name,opr:"rel_o_m",value:+l}:void 0,...t.filter((e=>void 0!==e.value)).map((e=>{let t="";const a=["rel_o_m","ct","eq"],l=n[e.key].filter.map((e=>e.operator))||[];for(let n=0;n<a.length;n++){const e=a[n];if(l.includes(e)){t=e;break}}return{col:e.key,opr:t,value:e.value}}))].filter((e=>!!e))},a},It=function(){let{pageConf:e,params:t,paramsMap:n,sorter:a,only_favorite:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageConf:ee,params:de,paramsMap:Re,sorter:void 0,only_favorite:!1};L(!0);const s=JSON.stringify({...Ot(t,n),only_favorite:l,str_related:1,page:(e.current||1)-1,page_size:e.pageSize||10,...a});(0,D._Q)(Be.current,{form_data:s}).then((t=>{const{count:n,data:l}=t.data.result;v(l),$([]),ne({...ee,...e,total:n}),Ye(a)})).catch((e=>{console.log(e)})).finally((()=>L(!1)))},Et=e=>{Q(!0),Ee([]),(0,D.jZ)("".concat(Be.current).concat(e)).then((e=>{const t=e.data.result,n=[],a=e=>"[object Object]"===Object.prototype.toString.call(e)?e.last_name:e;Object.keys(t).forEach((e=>{n.push({label:Oe.current[e]||e,value:a(t[e]),key:e})})),Ee(n)})).catch((e=>{})).finally((()=>{Q(!1)}))},Ft={name:"csv_file",maxCount:1,action:"".concat(ze,"upload/"),headers:{authorization:"authorization-text"},beforeUpload:e=>{const t=-1!==e.name.indexOf(".csv"),n=-1!==e.name.indexOf(".xls"),a=-1!==e.name.indexOf(".json"),l=-1!==e.name.indexOf(".xlsx");if(t||a||n||l)return!0;o.Ay.error("\u6587\u4ef6\u683c\u5f0f\u652f\u6301CSV/JSON/XLS/XLSX")},onChange(e){"done"===e.file.status?d.A.success({message:At("\u5bfc\u5165\u6210\u529f"),description:JSON.stringify(e.file.response)}):"error"===e.file.status&&d.A.error({message:At("\u5bfc\u5165\u5931\u8d25"),description:JSON.stringify(e.file.response)})}};return(0,_.jsxs)("div",{className:"fade-in h100 d-f fd-c",children:[(0,_.jsx)(P,{title:"".concat(At("\u6dfb\u52a0")," ").concat(tt),formData:Ae,loading:V,visible:H,onCancel:()=>{B(!1)},onCreate:(e,t)=>{z(!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const t=e[n];if(Array.isArray(t)){if(t[0]&&"[object Object]"===Object.prototype.toString.call(t[0]))continue;e[n]=e[n].join(",")}}(0,D.re)(Be.current,e).then((e=>{o.Ay.success("".concat(At("\u6dfb\u52a0")," ").concat(tt," ").concat(At("\u6210\u529f"))),t.resetFields(),B(!1),It({...Ct,pageConf:te,params:de,sorter:Ze,paramsMap:Re})})).catch((e=>{o.Ay.error("".concat(At("\u6dfb\u52a0")," ").concat(tt," ").concat(At("\u5931\u8d25")))})).finally((()=>{z(!1)}))},children:(e,t)=>(0,_.jsx)(se,{form:e,onRetryInfoChange:t=>{z(!0);const n=e.getFieldsValue();for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){void 0===n[e]&&delete n[e]}const a=JSON.stringify(n);e.resetFields(),(0,D._F)("".concat(Be.current,"_info"),{exist_add_args:a}).then((t=>{const{add_columns:n,label_columns:a,description_columns:l,add_fieldsets:s}=t.data,c=n.reduce(((e,t)=>({...e,[t.name]:t})),{}),r=Nt(n,a,l),i=s.map((e=>{const t=e.fields.map((e=>c[e])).filter((e=>!!e));return{group:e.group,expanded:e.expanded,config:Nt(t,a,l)}})),o=n.filter((e=>""!==e.default)).map((e=>({[e.name]:e.default}))).reduce(((e,t)=>({...e,...t})),{});e.setFieldsValue(o),fe(r),ye(i)})).catch((e=>{o.Ay.error(At("\u5b57\u6bb5\u5207\u6362\u9519\u8bef"))})).finally((()=>{z(!1)}))},formChangeRes:t,linkageConfig:We,config:he,configGroup:je})}),(0,_.jsx)(P,{title:"".concat(At("\u4fee\u6539")," ").concat(tt),formData:Ie.reduce(((e,t)=>{if("select"===(we[t.key]||{})["ui-type"]){let n=t.value;const a=(we[t.key]||{}).values||[],l=a.map((e=>e.value)).indexOf(t.value);return~l&&(n=a[l].id),{...e,[t.key]:n}}if("select2"===(we[t.key]||{})["ui-type"])return{...e,[t.key]:(t.value||"").split(",")};if("datePicker"===(we[t.key]||{})["ui-type"]){let n=t.value;return n=w()(n),{...e,[t.key]:n}}if("list"===(we[t.key]||{})["ui-type"]){const n=(t.value||[]).map((e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];"datePicker"===(we[t]||{})["ui-type"]&&(e[t]=w()(n))}return e}));return{...e,[t.key]:n}}return{...e,[t.key]:t.value}}),{}),loading:U||G,visible:J,onCancel:()=>{W(!1)},onCreate:e=>{q(!0),Ee([]);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(Array.isArray(n)){if(n[0]&&"[object Object]"===Object.prototype.toString.call(n[0]))continue;e[t]=e[t].join(",")}}(0,D.vL)("".concat(Be.current).concat(e[$e]),e).then((e=>{o.Ay.success("".concat(At("\u66f4\u65b0")," ").concat(tt," ").concat(At("\u6210\u529f"))),W(!1),It({...Ct,pageConf:te,params:de,sorter:Ze,paramsMap:Re})})).catch((e=>{o.Ay.error("".concat(At("\u66f4\u65b0")," ").concat(tt," ").concat(At("\u5931\u8d25")))})).finally((()=>{q(!1)}))},children:e=>(0,_.jsx)(se,{form:e,primaryKey:$e,config:xe,linkageConfig:We,configGroup:_e})}),(0,_.jsx)(i.A,{title:"".concat(tt," ").concat(At("\u8be6\u60c5")),visible:X,footer:null,width:800,destroyOnClose:!0,onCancel:()=>{Z(!1)},children:(0,_.jsx)(u.A,{spinning:G,children:(0,_.jsx)("div",{className:"pb32",style:{minHeight:300},children:Ie.map(((e,t)=>(0,_.jsxs)(m.A,{className:"mb16",children:[(0,_.jsx)(p.A,{span:6,children:(0,_.jsx)("div",{className:"ta-r",children:(0,_.jsxs)("strong",{children:[e.label,"\uff1a"]})})}),(0,_.jsx)(p.A,{span:18,children:(0,_.jsx)("pre",{style:{whiteSpace:"break-spaces"},dangerouslySetInnerHTML:{__html:(()=>{let t=e.value;if("[object Object]"===Object.prototype.toString.call(e.value)||"[object Array]"===Object.prototype.toString.call(e.value))try{t=JSON.stringify(e.value)}catch(n){}return t})()}})})]},"dataDetail_".concat(t))))})})}),(0,_.jsx)(b,{title:(0,_.jsxs)(_.Fragment,{children:[null!==e&&void 0!==e&&e.isSubRoute||(0,M.sF)("targetId")?(0,_.jsxs)(h.A,{className:"mr16",onClick:()=>{t("/data/metadata/metadata_dimension"),window.location.reload()},children:[(0,_.jsx)(N.A,{}),At("\u8fd4\u56de")]}):null,(0,_.jsx)("span",{children:tt})]}),breadcrumbs:((null===e||void 0===e?void 0:e.breadcrumbs)||[]).map(((t,n)=>(0,_.jsxs)("span",{className:"c-icon-b fs12",children:["/",(0,_.jsx)("span",{className:"plr2",children:t})]},"templateTitle_".concat(null===e||void 0===e?void 0:e.name,"_").concat(n)))),children:De?(0,_.jsxs)("div",{className:"link",children:[(0,_.jsx)("span",{className:"pr4",onClick:()=>{window.open(De,"blank")},children:At("\u5e2e\u52a9\u94fe\u63a5")}),(0,_.jsx)(O.A,{})]}):null}),(0,_.jsx)(j.UC,{className:"appmgmt-content bg-title h100 d-f fd-c",children:(0,_.jsxs)("div",{className:"mlr16 mb16 flex1 bg-w",children:[!!ie.length&&(0,_.jsx)(K,{values:de,params:ie,onChange:e=>{localStorage.setItem("filter_".concat(n.pathname).concat(n.search),JSON.stringify(e)),pe(e),It({...Ct,pageConf:ee,params:e,sorter:Ze,paramsMap:Re})}}),gt?(0,_.jsx)(ce.A,{url:ze}):null,"card"!==at?(0,_.jsx)(A.A,{cancelExportData:!0,tableKey:"tablebox_".concat(n.pathname),titleNode:(0,_.jsx)(p.A,{className:"tablebox-title",children:(0,_.jsxs)("div",{className:"d-f ac",children:[(0,_.jsx)("div",{className:"mr8",children:vt||""}),ht?(0,_.jsx)("div",{className:"pb2",children:(0,_.jsx)(f.A,{checked:ut,checkedChildren:At("\u5168\u90e8"),unCheckedChildren:At("\u6211\u7684\u6536\u85cf"),defaultChecked:!0,onChange:e=>{var t;t=e,pt.current=t,mt(t),It({...Ct,pageConf:ee,params:de,sorter:Ze,paramsMap:Re,only_favorite:!e})}})}):null]})}),buttonNode:(0,_.jsxs)("div",{className:"d-f ac",children:[rt&&rt.length?rt.map((e=>(0,_.jsx)(h.A,{type:"primary",className:"mr16",onClick:()=>{window.open(e.url,"bank")},children:e.text}))):null,Me.includes("can_add")?(0,_.jsxs)(h.A,{className:"mr16",type:"primary",onClick:()=>B(!0),children:[At("\u6dfb\u52a0"),tt,(0,_.jsx)(I.A,{})]}):null,(0,_.jsx)("div",{children:(0,_.jsx)(c.A,{overlay:(0,_.jsx)(r.A,{children:Qe.map(((e,t)=>(0,_.jsx)(r.A.Item,{children:(0,_.jsx)("span",{className:"link",onClick:()=>(e=>{Y.length?i.A.confirm({title:e.confirmation,icon:(0,_.jsx)(k.A,{}),content:"",okText:At("\u786e\u8ba4"),cancelText:At("\u53d6\u6d88"),onOk:()=>new Promise(((t,n)=>{(0,D.Ku)("".concat(Be.current,"multi_action/").concat(e.name),{ids:Y.map((e=>JSON.parse(e||"{}")[$e]))}).then((e=>{t("")})).catch((e=>{n()}))})).then((e=>{o.Ay.success(At("\u64cd\u4f5c\u6210\u529f")),It({...Ct,pageConf:te,params:de,sorter:Ze,paramsMap:Re})})).catch((()=>{o.Ay.error(At("\u64cd\u4f5c\u5931\u8d25"))})),onCancel(){}}):o.Ay.warn(At("\u8bf7\u5148\u9009\u62e9"))})(e),children:"".concat(At("\u6279\u91cf")," ").concat(e.text)})},"table_muliple_".concat(t))))}),children:(0,_.jsxs)(h.A,{children:[At("\u6279\u91cf\u64cd\u4f5c")," ",(0,_.jsx)(C.A,{})]})})}),Ue?(0,_.jsx)("div",{className:"d-f ml16",children:(0,_.jsx)(l.A,{color:"#fff",title:(0,_.jsxs)("span",{className:"tips-content-b",children:[(0,_.jsxs)("div",{children:[At("\u6ce8\u610f\uff1acsv\u9017\u53f7\u5206\u9694"),"\uff0c"]}),(0,_.jsx)("div",{children:At("\u7b2c\u4e00\u884c\u4e3a\u5217\u7684\u82f1\u6587\u540d")})," ",(0,_.jsx)("div",{className:"link",onClick:()=>{window.open("".concat(window.location.origin).concat(Be.current,"download_template"))},children:At("\u4e0b\u8f7d\u5bfc\u5165\u6a21\u677f")})]}),placement:"topLeft",children:(0,_.jsx)(x.A,{...Ft,children:(0,_.jsx)(h.A,{className:"",icon:(0,_.jsx)(E.A,{}),children:At("\u6279\u91cf\u5bfc\u5165\u6570\u636e")})})})}):null,qe?(0,_.jsxs)(h.A,{className:"ml16",onClick:()=>{i.A.confirm({title:At("\u5bfc\u51fa\u6570\u636e"),icon:(0,_.jsx)(k.A,{}),content:"",okText:At("\u786e\u8ba4\u5bfc\u51fa\u6570\u636e"),cancelText:At("\u53d6\u6d88"),onOk(){const e=Ot(de,Re),t=JSON.stringify(e);window.open("".concat(window.location.origin).concat(Be.current,"download?form_data=").concat(t)),o.Ay.success(At("\u5bfc\u51fa\u6210\u529f"))},onCancel(){}})},children:[At("\u6279\u91cf\u5bfc\u51fa"),"  ",(0,_.jsx)(F.A,{})]}):null]}),rowKey:e=>JSON.stringify(e),columns:ae,loading:S,pagination:te,dataSource:y,onChange:(e,t,n)=>{const a=n.order?{order_column:n.columnKey,order_direction:"ascend"===n.order?"asc":"desc"}:void 0;It({...Ct,pageConf:e,params:de,paramsMap:Re,sorter:a})},rowSelection:{type:"checkbox",fixed:"left",columnWidth:32,selectedRowKeys:Y,onChange:e=>{$(e)}},scroll:{x:Fe,y:wt}}):(0,_.jsxs)("div",{className:"bg-w p16",children:[(0,_.jsx)("div",{className:"d-f fw",children:y.map(((e,t)=>(0,_.jsx)("div",{style:{overflowY:"auto",width:null===st||void 0===st?void 0:st.card_width,height:null===st||void 0===st?void 0:st.card_height},className:"card-row mr16 mb16",children:Object.keys(e).map(((n,a)=>ot.includes(n)?(0,_.jsx)("div",{style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:e[n]}},"row".concat(t).concat(a)):null))},"card".concat(t))))}),(0,_.jsx)("div",{className:"ta-r",children:(0,_.jsx)(g.A,{...te,onChange:(e,t)=>{It({...Ct,pageConf:{...te,current:e,pageSize:t},params:de,paramsMap:Re})}})})]})]})})]})}},4743:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ChartOptionTempalte});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76998),_api_kubeflowApi__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63871),_components_EchartCore_EchartCore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(83100),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(23446);function ChartOptionTempalte(props){const[option,setOption]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{props.url&&(0,_api_kubeflowApi__WEBPACK_IMPORTED_MODULE_1__.jF)("".concat(props.url,"echart"),{}).then((res=>{const option=res.data.result;var currentOps={};eval("currentOps=".concat(option)),setOption(currentOps)})).catch((e=>{})).finally((()=>{setLoading(!1)}))}),[props.url]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components_EchartCore_EchartCore__WEBPACK_IMPORTED_MODULE_2__.A,{option:option,loading:loading})}}}]);
//# sourceMappingURL=338.966650d5.chunk.js.map